<section class="calendar">
  <v-row>
      <v-flex md2>
          <!-- <email-navigation @click:create="showCreateMail = true; showBodyOfCreateMail = true" @selectMailBox="selectMailBox"/> -->
          <calendar-navigation @setSelectedCalendar="setSelectedCalendar"/>
        </v-flex>
      <v-flex>
    <v-card>
      <v-card-text>
        <v-calendar ref="calendar" :now="today" :value="today" :events="events" color="primary" type="week">
          <!-- the events at the top (all-day) -->
          <template v-if="events.lenght" v-slot:day-header="{ date }">
            <template v-for="event in eventsMap[date]">
              <!-- all day events don't have time -->
              <div v-if="!event.time" :key="event.title" class="my-event" @click="open(event)">
                {{event.summary}}
              </div>
            </template>
          </template>
          <!-- the events at the bottom (timed) -->
          <template v-if="events.lenght" v-slot:day-body="{ date, timeToY, minutesToPixels }">
            <template v-for="event in eventsMap[date]">
              <!-- timed events -->
              <div v-if="event.time" :key="event.title"
                :style="{ top: timeToY(event.time) + 'px', height: minutesToPixels(event.duration) + 'px' }"
                class="my-event with-time" @click="open(event)">{{event.summary}}</div>
            </template>
          </template>
        </v-calendar>
      </v-card-text>
    </v-card>
  </v-flex>
  </v-row>
  <v-dialog v-model="addEventDialog" max-width="900px" @click:outside="clearAndClose">
      <v-card>
        <full-event :selectedCalendarId="selectedCalendarId" :calendars="calendars" editable @update="clearAndClose" @cancel="clearAndClose"/>
      </v-card>
    </v-dialog>
    <v-btn v-if="(calendars.length > 0)" fixed app bottom right fab dark color="secondary" @click="addEventDialog = true" style="z-index: 99">
      <v-icon>fas fa-plus</v-icon>
    </v-btn>
</section>